<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
  <title>Homework 1</title>

  <script id="vertex-shader" type="x-shader/x-vertex">
    #version 300 es

    in  vec4 aPosition;
    in  vec4 aColor;
    in  vec3 aNormal;
    out vec4 vColor;
    
    uniform vec4 uAmbientProduct, uDiffuseProduct, uSpecularProduct;
    uniform mat4 uModelViewMatrix;
    uniform mat4 uProjectionMatrix;
    uniform mat4 uRotationMatrix;
    uniform bool uLightFlag;
    uniform vec4 uLightPosition;
    uniform float uShininess;
    uniform vec3 uTheta;

    void main()
    {
      vec3 pos = -(uRotationMatrix * aPosition).xyz;

      //fixed light postion
      vec3 light = uLightPosition.xyz;
      vec3 L;
      if(uLightPosition.w == 0.0) 
        L = normalize(light);
      else
        L = normalize(light - pos);

      vec3 E = normalize(-pos);
      vec3 H = normalize(L + E);

      vec4 NN = vec4(aNormal,0);

      // Transform vertex normal into eye coordinates
      vec3 N = normalize((uRotationMatrix*NN).xyz);

      // Compute terms in the illumination equation
      vec4 ambient = uAmbientProduct;

      float Kd = max(dot(L, N), 0.0);
      vec4  diffuse = Kd*uDiffuseProduct;

      vColor = aColor;
      if (uLightFlag)
        vColor += ambient + diffuse;
      vColor.a = 1.0;
      gl_Position = uProjectionMatrix * uModelViewMatrix * uRotationMatrix * aPosition;
      gl_Position.z = -gl_Position.z;
    }
  </script>

  <script id="fragment-shader" type="x-shader/x-fragment">
    #version 300 es

    precision mediump float;

    in vec4 vColor;
    out vec4 fColor;

    void
    main()
    {
        fColor = vColor;

    }
  </script>

  <script type="text/javascript" src="../Common/InitShaders.js"></script>
  <script type="text/javascript" src="../Common/MVnew.js"></script>
  <script type="text/javascript" src="homework1.js"></script>
  <link rel="stylesheet" type="text/css" href="style.css"></script>
</head>

<body>
  <div style="display: flex;">
    <canvas id="gl-canvas" width="1024" height="1024">
      Oops ... your browser doesn't support the HTML5 canvas element
    </canvas>

    <div id="buttons">
      <button id="xButton">Rotate X</button>
      <button id="yButton">Rotate Y</button>
      <button id="zButton">Rotate Z</button>
      <button id="stopButton">Stop Rotation</button>
      <button id="directionButton">Change direction</button>


      <div>
        zNear .01<input id="zNearSlider" type="range" min=".01" max="3" step="0.1" value="2.21" />
        3
      </div>
      <div>
        zFar 3<input id="zFarSlider" type="range" min="3" max="10" step="3.0" value="6" />
        10
      </div>
      <div>
        x -5<input id="xSlider" type="range" min="-5" max="5" step="0.1" value="0" />
        5
      </div>
      <div>
        y -5<input id="ySlider" type="range" min="-5" max="5" step="0.1" value="0" />
        5
      </div>
      <div>
        z 0<input id="zSlider" type="range" min="0" max="10" step="0.1" value="4.8" />
        10
      </div>
      <div>
        fov 10<input id="fovSlider" type="range" min="10" max="120" step="5" value="90" />
        120
      </div>
      <div>
        aspect 0.5<input id="aspectSlider" type="range" min="0.5" max="2" step="0.1" value="1.5" />
        2
      </div>

      <button id="toggleLight">Toggle Light</button>
      <div>
        xLight -10<input id="xLighSlider" type="range" min="-10" max="10" step="0.5" value="1.0" />
        10
      </div>
      <div>
        yLight -10<input id="yLighSlider" type="range" min="-10" max="10" step="0.5" value="1.0" />
        10
      </div>
      <div>
        zLight -10<input id="zLighSlider" type="range" min="-10" max="10" step="0.5" value="1.0" />
        10
      </div>
    </div>
  </div>

</body>

</html>